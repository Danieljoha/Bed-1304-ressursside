
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>9 - Simulering &#8212; Bed-1304 Python-lab</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/10/simulering';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Kunnskapstest" href="../00/knowledge_test.html" />
    <link rel="prev" title="8 - SymPy" href="../09/sympy.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../00/intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/py.png" class="logo__image only-light" alt="Bed-1304 Python-lab - Home"/>
    <script>document.write(`<img src="../../_static/py.png" class="logo__image only-dark" alt="Bed-1304 Python-lab - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../00/intro.html">
                    Bed-1304 Python-lab
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01/introduksjon.html">1 - Introduksjon til kurset</a></li>



<li class="toctree-l1"><a class="reference internal" href="../02/python_basics.html">2 - Python basics</a></li>

<li class="toctree-l1"><a class="reference internal" href="../03/funksjoner.html">3 - Funksjoner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04/lister_oppslag_numpy.html">4 - Lister, oppslag og numpy</a></li>





<li class="toctree-l1"><a class="reference internal" href="../05/pandas_og_databehandling.html">5 - Pandas og databehandling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06/logikk_loops.html">6 - Logikk og l√∏kker</a></li>


<li class="toctree-l1"><a class="reference internal" href="../07/matplotlib.html">7 - Matplotlib</a></li>




<li class="toctree-l1"><a class="reference internal" href="../08/seaborn.html">7 - Seaborn</a></li>

<li class="toctree-l1"><a class="reference internal" href="../09/sympy.html">8 - SymPy</a></li>






<li class="toctree-l1 current active"><a class="current reference internal" href="#">9 - Simulering</a></li>









<li class="toctree-l1"><a class="reference internal" href="../00/knowledge_test.html">Kunnskapstest</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/Danieljoha/Bed-1304-ressursesside" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/Danieljoha/Bed-1304-ressursesside/issues/new?title=Issue%20on%20page%20%2Fnotebooks/10/simulering.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/10/simulering.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>9 - Simulering</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">9 - Simulering</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#for-lokker">For-l√∏kker</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-1">Eksempel 1:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-2">Eksempel 2:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-3">Eksempel 3:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-4">Eksempel 4</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#while-lokker">While-l√∏kker</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-5">Eksempel 5:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dette-leder-oss-inn-pa-denne-notatboken-sitt-tema-simuleringer">Dette leder oss inn p√• denne notatboken sitt tema - <strong>Simuleringer</strong> üìä üìà üìâ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulering-av-aksjekurs">Simulering av aksjekurs üíπ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-6">Eksempel 6:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulering-av-stokastisk-bevegelse-forklaring-av-koden-fra-eksempel-6">Simulering av stokastisk bevegelse - forklaring av koden fra eksempel 6</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hvordan-fungerer-simuleringen">üîπ Hvordan fungerer simuleringen?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#forklaring-av-kode">üîπ Forklaring av kode:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamisk-plott">Dynamisk plott üìâ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#viktig-a-merke-seg">üîπ Viktig √• merke seg:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-7">Eksempel 7:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#legge-til-litt-effekter">Legge til litt effekter üîÑ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-8">Eksempel 8:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selv-om-det-gar-an-a-bruke-jupyter-og-matplotlib-til-a-lage-visuelle-effekter-gar-det-litt-tregt-om-du-skal-lage-noer-mer-avansert-den-mest-vanlige-pakken-for-a-lage-grafisk-brukergrensesnitt-i-python-heter-tkinter-vi-gar-imidlertid-ikke-inn-pa-denne-pakken-i-dette-kurset"><strong>Selv om det g√•r an √• bruke jupyter og matplotlib til √• lage visuelle effekter, g√•r det litt tregt om du skal lage noer mer avansert. Den mest vanlige pakken for √• lage grafisk brukergrensesnitt i Python heter ¬¥tkinter¬¥. Vi g√•r imidlertid ikke inn p√• denne pakken i dette kurset.</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#men-for-den-interesserte-under-her-er-et-eksempel-pa-kode-som-benytter-seg-av-tkinter-for-dynamisk-plotting">Men for den interesserte - under her er et eksempel p√• kode som benytter seg av <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> for dynamisk plotting.</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#numerisk-optimering">üî¢ Numerisk optimering</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hva-gjor-vi-i-dette-eksemplet">Hva gj√∏r vi i dette eksemplet?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-11">Eksempel 11:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-12">Eksempel 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-13">Eksempel 13:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-14">Eksempel 14:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#monte-carlo-simulering">Monte Carlo-simulering üñ•Ô∏è üé≤ üìä</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hvorfor-bruke-monte-carlo-simulering">üîπ Hvorfor bruke Monte Carlo-simulering?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-15">Eksempel 15</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sa-lager-vi-en-funksjon-som-lager-en-inntektssti-income-path-for-et-gitt-antall-ars-inntekt-dette-kalles-en-sti-path-fordi-dagens-inntekt-er-avhengig-av-garsdagen-dagens-situasjon-er-altsa-avhengig-av-hvilken-sti-inntekten-har-fulgt-i-alle-tidligere-ar"><strong>S√• lager vi en funksjon som lager en ‚Äúinntektssti‚Äù (income path) for et gitt antall √•rs inntekt. Dette kalles en ‚Äústi‚Äù/‚Äùpath‚Äù fordi dagens inntekt er avhengig av g√•rsdagen. Dagens situasjon er alts√• avhengig av hvilken sti inntekten har fulgt i alle tidligere √•r.</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-16">Eksempel 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vi-kan-na-lage-en-funksjon-som-simulerer-et-gitt-antall-inntektsstier-gitt-ved-num-simulations"><strong>Vi kan n√• lage en funksjon som simulerer et gitt antall inntektsstier gitt ved <code class="docutils literal notranslate"><span class="pre">num_simulations</span></code>:</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-17">Eksempel 17:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vi-kan-na-plotte-fordelingen-for-a-fa-et-inntrykk-av-fordelingen-til-inntekten-i-avslutningsaret"><strong>Vi kan n√• plotte fordelingen, for √• f√• et inntrykk av fordelingen til inntekten i avslutnings√•ret:</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-18">Eksempel 18:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ekstra-visualisering-plotte-flere-inntektsstier"><strong>Ekstra visualisering: Plotte flere inntektsstier</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ekstra-ekstra-ikke-pensum-men-kjekt-a-vite-om"><strong>Ekstra-Ekstra IKKE PENSUM, MEN KJEKT √Ö VITE OM</strong></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgaver">Oppgaver</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-1-simulering-av-aksjekurs">Oppgave 1 - üìà Simulering av aksjekurs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-2-simulering-av-bedriftens-overskudd">Oppgave 2 - üè¢ Simulering av bedriftens overskudd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-3-simulering-av-lanekostnader">Oppgave 3 - üí∞ Simulering av l√•nekostnader</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-4-simulering-av-lagerstyring-og-ettersporsel">Oppgave 4 - üì¶ Simulering av lagerstyring og ettersp√∏rsel</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-5-simuleringer">Oppgave 5 - Simuleringer üí∞üé≤üí∞</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#case">Case</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-5-1">Oppgave 5.1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-5-2">Oppgave 5.2</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="simulering">
<h1>9 - Simulering<a class="headerlink" href="#simulering" title="Link to this heading">#</a></h1>
<p>L√∏kker er noe av det mest brukte verkt√∏yet for en programmerer. En l√∏kke er en programkode som repeteres, og det har vi g√•tt igjennom tidligere i kurset.</p>
<p>Det finnes i hovedsak to typer l√∏kker i Python: <code class="docutils literal notranslate"><span class="pre">while</span></code>-l√∏kker og <code class="docutils literal notranslate"><span class="pre">for</span></code>-l√∏kker. En <code class="docutils literal notranslate"><span class="pre">while</span></code> lar l√∏kken l√∏pe til en betingelse er oppfylt, mens <code class="docutils literal notranslate"><span class="pre">for</span></code> l√∏kken repeterer koden for alle elementene i en liste eller annen <em>iterativ datastruktur</em>.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="for-lokker">
<h1>For-l√∏kker<a class="headerlink" href="#for-lokker" title="Link to this heading">#</a></h1>
<p>Her er eksempel p√• en <code class="docutils literal notranslate"><span class="pre">for</span></code>-l√∏kke som deriverer alle utrykkene i listen <code class="docutils literal notranslate"><span class="pre">expressions</span></code>:</p>
<section id="eksempel-1">
<h2>Eksempel 1:<a class="headerlink" href="#eksempel-1" title="Link to this heading">#</a></h2>
<p>Vi har tidligere i kurset sett p√• <code class="docutils literal notranslate"><span class="pre">sympy</span></code> og derivasjon - dette kan vi ogs√• gj√∏re ved hjelp av en <code class="docutils literal notranslate"><span class="pre">for</span></code>-l√∏kke, for √• iterere gjennom en liste.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">Markdown</span><span class="p">,</span> <span class="n">display</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sympy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sp</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">sp</span><span class="o">.</span><span class="n">symbols</span><span class="p">(</span><span class="s2">&quot;x y&quot;</span><span class="p">)</span>

<span class="n">expressions</span><span class="o">=</span><span class="p">[</span>
    <span class="n">sp</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span>
    <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">5</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
    <span class="n">x</span><span class="o">*</span><span class="n">sp</span><span class="o">.</span><span class="n">ln</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expressions</span><span class="p">:</span>
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Den deriverte av $</span><span class="si">{</span><span class="n">sp</span><span class="o">.</span><span class="n">latex</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="si">}</span><span class="s2">$ er $</span><span class="si">{</span><span class="n">sp</span><span class="o">.</span><span class="n">latex</span><span class="p">(</span><span class="n">sp</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">x</span><span class="p">))</span><span class="si">}</span><span class="s2">$&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>Den deriverte av $x^{\frac{1}{y}}$ er $\frac{x^{\frac{1}{y}}}{x y}$</p>
<p>Den deriverte av $x^{2} + 5 e^{x}$ er $2 x + 5 e^{x}$</p>
<p>Den deriverte av $x \log{\left(x \right)}$ er $\log{\left(x \right)} + 1$</p>
</div>
</div>
</section>
<section id="eksempel-2">
<h2>Eksempel 2:<a class="headerlink" href="#eksempel-2" title="Link to this heading">#</a></h2>
<p>Eller du kan bare gj√∏re en enkel iterasjon for heltall fra en startverdi til en sluttverdi:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
6
7
0
1
2
</pre></div>
</div>
</div>
</div>
<p>Du kan ogs√• ‚Äúpakke ut‚Äù elementer, dersom hvert element i <code class="docutils literal notranslate"><span class="pre">for</span></code>-setningen har et bestemt antall sub-elementer. La oss f√∏rst lage en liste som inneholder en ¬¥tuple¬¥ med uttrykkene i <code class="docutils literal notranslate"><span class="pre">expressions</span></code> over, og den deriverte av disse:</p>
</section>
<section id="eksempel-3">
<h2>Eksempel 3:<a class="headerlink" href="#eksempel-3" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#using list comprehension to generate a list with expression,derivative tuples:</span>
<span class="n">expressions_w_derivatives</span><span class="o">=</span><span class="p">[</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">sp</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">x</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">expressions</span> <span class="p">]</span>
<span class="n">expressions_w_derivatives</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(x**(1/y), x**(1/y)/(x*y)),
 (x**2 + 5*exp(x), 2*x + 5*exp(x)),
 (x*log(x), log(x) + 1)]
</pre></div>
</div>
</div>
</div>
<p>Vi kan n√• kj√∏re en for-l√∏kke som forventer at hvert element i listen er en <em>iterabel</em> (for eksempel liste eller tuple) med to elementer:</p>
</section>
<section id="eksempel-4">
<h2>Eksempel 4<a class="headerlink" href="#eksempel-4" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">function</span><span class="p">,</span><span class="n">derivative</span> <span class="ow">in</span> <span class="n">expressions_w_derivatives</span><span class="p">:</span>
    <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Den deriverte av $</span><span class="si">{</span><span class="n">sp</span><span class="o">.</span><span class="n">latex</span><span class="p">(</span><span class="n">function</span><span class="p">)</span><span class="si">}</span><span class="s2">$ er $</span><span class="si">{</span><span class="n">sp</span><span class="o">.</span><span class="n">latex</span><span class="p">(</span><span class="n">derivative</span><span class="p">)</span><span class="si">}</span><span class="s2">$&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<p>Den deriverte av $x^{\frac{1}{y}}$ er $\frac{x^{\frac{1}{y}}}{x y}$</p>
<p>Den deriverte av $x^{2} + 5 e^{x}$ er $2 x + 5 e^{x}$</p>
<p>Den deriverte av $x \log{\left(x \right)}$ er $\log{\left(x \right)} + 1$</p>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="while-lokker">
<h1>While-l√∏kker<a class="headerlink" href="#while-lokker" title="Link to this heading">#</a></h1>
<p>En <code class="docutils literal notranslate"><span class="pre">while</span></code>-l√∏kke er en l√∏kke som fortsetter inntil en betingelse er oppfylt. I eksemplet under ser vi at det genereres nye tilfeldige aksjekurser s√• lenge kursen er under 125 kroner .</p>
<p>Aksjen skal bevege seg tilfeldig. For √• f√• til det bruker vi funksjonen <code class="docutils literal notranslate"><span class="pre">rand</span></code> fra <code class="docutils literal notranslate"><span class="pre">random</span></code>-modulen i numpy.  <code class="docutils literal notranslate"><span class="pre">np.random.rand()</span></code> gir et tilfeldig tall mellom null og √©n, s√• ved √• multiplisere <code class="docutils literal notranslate"><span class="pre">(np.random.rand()-0.5)</span></code> med 40, f√•r vi et tilfeldig tall mellom -20 og 20.</p>
<section id="eksempel-5">
<h2>Eksempel 5:<a class="headerlink" href="#eksempel-5" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">dy</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span>

<span class="k">while</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">125</span><span class="p">:</span>  
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="mi">40</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span> 
    <span class="c1">#print(y)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>100
101.31086870568222
98.62952432795232
101.55708481945828
110.86984603537334
114.86330719978002
123.36768104113719
118.77742639565398
104.14005344491139
105.3653160015079
92.33184886299452
110.86177612987359
113.53169654051621
104.07614663694005
98.03770618711366
91.66160636719145
74.3008222001767
75.13170496667456
62.496732315506215
74.26781993723974
89.47202480160641
95.20105000851466
111.21258485679444
102.82159685327622
116.70850613292622
117.44449796718916
100.04923485086533
83.17351973050135
75.927678059479
68.08965150844035
52.133283488186606
53.968111398195646
57.94449890511754
57.043599991288154
62.602429638928236
61.878827297594874
54.852348689664154
62.91770908411177
49.71539497619981
57.08993394839145
70.87660602231458
72.14915473336367
63.06699682812474
77.27970001175854
78.53759280632838
84.88227884368075
64.92889188398516
66.71152961804468
82.2683295689416
85.3052259356966
70.05790512572813
76.61797635209163
88.95305436097192
78.27383293275132
66.12869370895767
69.78677671457051
88.12783806595598
102.11856819365282
115.88283535208592
123.30684585620523
108.68352700071603
111.61947342454103
104.5732806121631
116.82431744096675
129.71131444749548
</pre></div>
</div>
</div>
</div>
<p>Legg spesielt merke til <code class="docutils literal notranslate"><span class="pre">y+=dy</span></code> over. Denne operasjonen legger <code class="docutils literal notranslate"><span class="pre">dy</span></code> til <code class="docutils literal notranslate"><span class="pre">y</span></code>, og tilsvarer alts√• <code class="docutils literal notranslate"><span class="pre">y=y+dy</span></code>. De aller fleste programmeringsspr√•k st√∏tter <code class="docutils literal notranslate"><span class="pre">+=</span></code>-operatoren.</p>
<p>Legg ogs√• merke til at vi kan sette flere variabler samtidig, ved √• skille b√•de variablene og verdiene med like mange kommaer, <code class="docutils literal notranslate"><span class="pre">dy,y=0,100</span></code></p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="dette-leder-oss-inn-pa-denne-notatboken-sitt-tema-simuleringer">
<h1>Dette leder oss inn p√• denne notatboken sitt tema - <strong>Simuleringer</strong> üìä üìà üìâ<a class="headerlink" href="#dette-leder-oss-inn-pa-denne-notatboken-sitt-tema-simuleringer" title="Link to this heading">#</a></h1>
<p>Simuleringer brukes i √∏konomi for √• modellere usikkerhet, teste hypoteser og analysere sannsynlige utfall.<br />
I denne notatboken skal vi utforske hvordan vi kan bruke Python til √• simulere √∏konomiske problemstillinger ved hjelp av tilfeldige tall og statistiske teknikker.</p>
<p>Vi vil se p√•:</p>
<ul class="simple">
<li><p>Generering av tilfeldige tall</p></li>
<li><p>Monte Carlo-simuleringer</p></li>
<li><p>Simulering av √∏konomiske prosesser, som prisutvikling og risikoanalyse</p></li>
</ul>
<p>L√∏kker kan brukes til mye, s√• la oss se p√• et eksempel p√• simulering.</p>
<p>Simulering vil si √• trekke tilfeldige tall for √• se hvordan en modell opptrer under usikkerhet.</p>
<section id="simulering-av-aksjekurs">
<h2>Simulering av aksjekurs üíπ<a class="headerlink" href="#simulering-av-aksjekurs" title="Link to this heading">#</a></h2>
<p>I denne simuleringen antar vi at en aksjekurs starter p√• 100 kr og beveger seg tilfeldig over tid.<br />
Vi observerer aksjen hvert sjette minutt, eller √©n tidel (0.1) av en time. Tiden √∏ker dermed med 0.1 i hver periode.</p>
<p>For √• tegne opp stien til aksjekursen, lager vi f√∏rst lister for x- og y-verdiene, og s√• legger vi til elementer i hver av listene med <code class="docutils literal notranslate"><span class="pre">append</span></code>-funksjonen til listeobjektene, f√∏r listen plottes som en graf. Kj√∏r koden flere ganger, for √• se ulike simuleringer.</p>
<section id="eksempel-6">
<h3>Eksempel 6:<a class="headerlink" href="#eksempel-6" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ellipse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">clear_output</span>

<span class="c1"># Oppretter en figur og akse med en st√∏rrelse p√• 20x10 tommer</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Setter begrensninger for y- og x-aksen</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">250</span><span class="p">])</span>            <span class="c1"># Y-aksen g√•r fra 0 til 250</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">])</span>             <span class="c1"># X-aksen g√•r fra 0 til 20</span>

<span class="c1"># Initierer med en rekke verdier (x = 0, y = 100, dy = 0)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">,</span><span class="mi">100</span> <span class="p">,</span><span class="mi">0</span>

<span class="c1"># Lager tomme lister som vil lagre x- og y-posisjoner gjennom l√∏kka</span>
<span class="n">ypath</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">xpath</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># While-l√∏kka kj√∏rer s√• lenge x &lt; 25, og for hvert steg √∏kes x med 0.1</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">25</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mf">0.1</span>            <span class="c1"># √òker x med 0.1 for hvert steg</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span>             <span class="c1"># Legger til dy til y-posisjonen (endrer y basert p√• dy)</span>
    
    <span class="c1"># Oppdaterer dy med en ny tilfeldig verdi som varierer mellom -20 og 20.</span>
    <span class="c1"># np.random.rand() gir en tilfeldig verdi mellom 0 og 1, </span>
    <span class="c1"># s√• 40 * (np.random.rand() - 0.5) gir et tilfeldig tall mellom -20 og 20.</span>
    <span class="c1"># Dette gir y-posisjonen en tilfeldig variasjon ved hvert steg.</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span>

    <span class="c1"># Legger til de nye x- og y-verdiene i listene xpath og ypath</span>
    <span class="n">xpath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ypath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="c1"># Plotter banen for y-verdiene som funksjon av x, med etiketten &#39;YARA&#39;</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xpath</span><span class="p">,</span> <span class="n">ypath</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;YARA&#39;</span><span class="p">)</span>

<span class="c1"># Legger til en legende (forklaring) √∏verst til venstre p√• plottet</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># Viser plottet</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/5a1f30a6a1a4246bb41b69e64fb3ad0437ccc37db1a296337e37d00fe51fb047.png" src="../../_images/5a1f30a6a1a4246bb41b69e64fb3ad0437ccc37db1a296337e37d00fe51fb047.png" />
</div>
</div>
</section>
</section>
<section id="simulering-av-stokastisk-bevegelse-forklaring-av-koden-fra-eksempel-6">
<h2>Simulering av stokastisk bevegelse - forklaring av koden fra eksempel 6<a class="headerlink" href="#simulering-av-stokastisk-bevegelse-forklaring-av-koden-fra-eksempel-6" title="Link to this heading">#</a></h2>
<p>Denne koden simulerer en tilfeldig bevegelse over tid, som kan brukes til √• modellere aksjekurser eller andre √∏konomiske prosesser med usikkerhet.</p>
<section id="hvordan-fungerer-simuleringen">
<h3>üîπ Hvordan fungerer simuleringen?<a class="headerlink" href="#hvordan-fungerer-simuleringen" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Vi starter med en initial verdi <strong>y = 100</strong> og en tilfeldig endring <strong>dy</strong>.</p></li>
<li><p>Hver iterasjon √∏ker <strong>x</strong> med <strong>0.1</strong>, og <strong>y</strong> justeres med en tilfeldig verdi.</p></li>
<li><p><strong>dy</strong> oppdateres tilfeldig mellom <strong>-20 og 20</strong>, slik at vi f√•r en tilfeldig variasjon i y-posisjonen.</p></li>
<li><p>Bevegelsen plottes som en kurve, og resultatet viser hvordan verdien utvikler seg over tid.</p></li>
</ul>
</section>
<section id="forklaring-av-kode">
<h3>üîπ Forklaring av kode:<a class="headerlink" href="#forklaring-av-kode" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ax.set_ylim([0,250])</span></code></strong> og <strong><code class="docutils literal notranslate"><span class="pre">ax.set_xlim([0,20])</span></code></strong> setter grensene for x- og y-aksen.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">25:</span></code></strong> s√∏rger for at simuleringen kj√∏rer til x n√•r 25.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">dy</span> <span class="pre">=</span> <span class="pre">40</span> <span class="pre">*</span> <span class="pre">(np.random.rand()</span> <span class="pre">-</span> <span class="pre">0.5)</span></code></strong> genererer en tilfeldig endring mellom -20 og 20.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">ax.plot(xpath,</span> <span class="pre">ypath,</span> <span class="pre">label='YARA')</span></code></strong> tegner banen for den simulerte bevegelsen.</p></li>
</ul>
<p>Kj√∏r koden flere ganger for √• se hvordan den tilfeldige bevegelsen varierer!</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="dynamisk-plott">
<h1>Dynamisk plott üìâ<a class="headerlink" href="#dynamisk-plott" title="Link to this heading">#</a></h1>
<p>Om vi √∏nsker √• formidle kunnskap, er det av og til nyttig med dynamiske plott. Alts√• plott som endrer seg mens du ser p√• dem. Vi kan gj√∏re det ved √• rykke inn de to siste setningene fra Eksempel 6.</p>
<p>Det er disse setningene som lager plottet. Ved √• rykke dem inn, plottes figuren i hver iterasjon.</p>
<section id="viktig-a-merke-seg">
<h2>üîπ Viktig √• merke seg:<a class="headerlink" href="#viktig-a-merke-seg" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Uten <strong><code class="docutils literal notranslate"><span class="pre">clear_output(wait=True)</span></code></strong>, ville vi sett <strong>25 separate figurer</strong> i stedet for √©n dynamisk oppdatering.</p></li>
<li><p>I tillegg, s√• legger vi til at y-verdien ikke kan bli mindre enn <span class="math notranslate nohighlight">\(0\)</span>. Det gj√∏r vi her <strong><code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">25</span> <span class="pre">and</span> <span class="pre">y</span> <span class="pre">&gt;=0</span></code></strong>.</p></li>
</ul>
<p>Kj√∏r koden i Eksempel 7 og se hvordan den simulerte bevegelsen utvikler seg i sanntid!</p>
<section id="eksempel-7">
<h3>Eksempel 7:<a class="headerlink" href="#eksempel-7" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>

<span class="n">ypath</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">xpath</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">25</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;=</span><span class="mi">0</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mf">0.1</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span>

    <span class="n">xpath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ypath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    
    <span class="c1"># Ved √• plassere plot-funksjonen inne i l√∏kka, s√∏rger vi for at den plottes ved hver iterasjon</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xpath</span><span class="p">,</span> <span class="n">ypath</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;YARA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    
    <span class="c1"># Jupyter viser som standard bare siste utsagn, s√• vi m√• legge til dette</span>
    <span class="c1"># for √• plotte p√• hver iterasjon</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    
    <span class="c1"># S√∏rger for at plottet og utdataene blir slettet hver gang:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">400</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
    <span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/PIL/ImageFile.py:536,</span> in <span class="ni">_save</span><span class="nt">(im, fp, tile, bufsize)</span>
<span class="g g-Whitespace">    </span><span class="mi">535</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">536</span>     <span class="n">fh</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">fileno</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">537</span>     <span class="n">fp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

<span class="ne">AttributeError</span>: &#39;_idat&#39; object has no attribute &#39;fileno&#39;

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">KeyboardInterrupt</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="n">line</span> <span class="mi">20</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">18</span> <span class="c1"># Jupyter viser som standard bare siste utsagn, s√• vi m√• legge til dette</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span> <span class="c1"># for √• plotte p√• hver iterasjon</span>
<span class="ne">---&gt; </span><span class="mi">20</span> <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">22</span> <span class="c1"># S√∏rger for at plottet og utdataene blir slettet hver gang:</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span> <span class="n">ax</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/IPython/core/display_functions.py:298,</span> in <span class="ni">display</span><span class="nt">(include, exclude, metadata, transient, display_id, raw, clear, *objs, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">296</span>     <span class="n">publish_display_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">297</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">298</span>     <span class="n">format_dict</span><span class="p">,</span> <span class="n">md_dict</span> <span class="o">=</span> <span class="nb">format</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">include</span><span class="o">=</span><span class="n">include</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">299</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">format_dict</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">300</span>         <span class="c1"># nothing to display (e.g. _ipython_display_ took over)</span>
<span class="g g-Whitespace">    </span><span class="mi">301</span>         <span class="k">continue</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/IPython/core/formatters.py:182,</span> in <span class="ni">DisplayFormatter.format</span><span class="nt">(self, obj, include, exclude)</span>
<span class="g g-Whitespace">    </span><span class="mi">180</span> <span class="n">md</span> <span class="o">=</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">181</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">182</span>     <span class="n">data</span> <span class="o">=</span> <span class="n">formatter</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">183</span> <span class="k">except</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">184</span>     <span class="c1"># FIXME: log the exception</span>
<span class="g g-Whitespace">    </span><span class="mi">185</span>     <span class="k">raise</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/decorator.py:232,</span> in <span class="ni">decorate.&lt;locals&gt;.fun</span><span class="nt">(*args, **kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">230</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">kwsyntax</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">231</span>     <span class="n">args</span><span class="p">,</span> <span class="n">kw</span> <span class="o">=</span> <span class="n">fix</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">sig</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">232</span> <span class="k">return</span> <span class="n">caller</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">extras</span> <span class="o">+</span> <span class="n">args</span><span class="p">),</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/IPython/core/formatters.py:226,</span> in <span class="ni">catch_format_error</span><span class="nt">(method, self, *args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;show traceback on failed format call&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">225</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">226</span>     <span class="n">r</span> <span class="o">=</span> <span class="n">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">227</span> <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">228</span>     <span class="c1"># don&#39;t warn on NotImplementedErrors</span>
<span class="g g-Whitespace">    </span><span class="mi">229</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_check_return</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/IPython/core/formatters.py:343,</span> in <span class="ni">BaseFormatter.__call__</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">341</span>     <span class="k">pass</span>
<span class="g g-Whitespace">    </span><span class="mi">342</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">343</span>     <span class="k">return</span> <span class="n">printer</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">344</span> <span class="c1"># Finally look for special method names</span>
<span class="g g-Whitespace">    </span><span class="mi">345</span> <span class="n">method</span> <span class="o">=</span> <span class="n">get_real_method</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_method</span><span class="p">)</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/IPython/core/pylabtools.py:170,</span> in <span class="ni">print_figure</span><span class="nt">(fig, fmt, bbox_inches, base64, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">167</span>     <span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.backend_bases</span><span class="w"> </span><span class="kn">import</span> <span class="n">FigureCanvasBase</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span>     <span class="n">FigureCanvasBase</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">170</span> <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">print_figure</span><span class="p">(</span><span class="n">bytes_io</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">171</span> <span class="n">data</span> <span class="o">=</span> <span class="n">bytes_io</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">172</span> <span class="k">if</span> <span class="n">fmt</span> <span class="o">==</span> <span class="s1">&#39;svg&#39;</span><span class="p">:</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/matplotlib/backend_bases.py:2204,</span> in <span class="ni">FigureCanvasBase.print_figure</span><span class="nt">(self, filename, dpi, facecolor, edgecolor, orientation, format, bbox_inches, pad_inches, bbox_extra_artists, backend, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">2200</span> <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">2201</span>     <span class="c1"># _get_renderer may change the figure dpi (as vector formats</span>
<span class="g g-Whitespace">   </span><span class="mi">2202</span>     <span class="c1"># force the figure dpi to 72), so we need to set it again here.</span>
<span class="g g-Whitespace">   </span><span class="mi">2203</span>     <span class="k">with</span> <span class="n">cbook</span><span class="o">.</span><span class="n">_setattr_cm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">2204</span>         <span class="n">result</span> <span class="o">=</span> <span class="n">print_method</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">2205</span>             <span class="n">filename</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2206</span>             <span class="n">facecolor</span><span class="o">=</span><span class="n">facecolor</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2207</span>             <span class="n">edgecolor</span><span class="o">=</span><span class="n">edgecolor</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2208</span>             <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2209</span>             <span class="n">bbox_inches_restore</span><span class="o">=</span><span class="n">_bbox_inches_restore</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2210</span>             <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2211</span> <span class="k">finally</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">2212</span>     <span class="k">if</span> <span class="n">bbox_inches</span> <span class="ow">and</span> <span class="n">restore_bbox</span><span class="p">:</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/matplotlib/backend_bases.py:2054,</span> in <span class="ni">FigureCanvasBase._switch_canvas_and_return_print_method.&lt;locals&gt;.&lt;lambda&gt;</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">2050</span>     <span class="n">optional_kws</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># Passed by print_figure for other renderers.</span>
<span class="g g-Whitespace">   </span><span class="mi">2051</span>         <span class="s2">&quot;dpi&quot;</span><span class="p">,</span> <span class="s2">&quot;facecolor&quot;</span><span class="p">,</span> <span class="s2">&quot;edgecolor&quot;</span><span class="p">,</span> <span class="s2">&quot;orientation&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2052</span>         <span class="s2">&quot;bbox_inches_restore&quot;</span><span class="p">}</span>
<span class="g g-Whitespace">   </span><span class="mi">2053</span>     <span class="n">skip</span> <span class="o">=</span> <span class="n">optional_kws</span> <span class="o">-</span> <span class="p">{</span><span class="o">*</span><span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="n">meth</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">}</span>
<span class="ne">-&gt; </span><span class="mi">2054</span>     <span class="n">print_method</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">meth</span><span class="p">)(</span><span class="k">lambda</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">meth</span><span class="p">(</span>
<span class="nn">   2055         *args, **{k: v for k, v</span> in <span class="ni">kwargs.items</span><span class="nt">() if k not in skip}))</span>
<span class="g g-Whitespace">   </span><span class="mi">2056</span> <span class="k">else</span><span class="p">:</span>  <span class="c1"># Let third-parties do as they see fit.</span>
<span class="g g-Whitespace">   </span><span class="mi">2057</span>     <span class="n">print_method</span> <span class="o">=</span> <span class="n">meth</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/matplotlib/backends/backend_agg.py:496,</span> in <span class="ni">FigureCanvasAgg.print_png</span><span class="nt">(self, filename_or_obj, metadata, pil_kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">449</span> <span class="k">def</span><span class="w"> </span><span class="nf">print_png</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename_or_obj</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pil_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">450</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">451</span><span class="sd">     Write the figure to a PNG file.</span>
<span class="g g-Whitespace">    </span><span class="mi">452</span><span class="sd"> </span>
<span class="sd">   (...)</span>
<span class="g g-Whitespace">    </span><span class="mi">494</span><span class="sd">         *metadata*, including the default &#39;Software&#39; key.</span>
<span class="g g-Whitespace">    </span><span class="mi">495</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">496</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_print_pil</span><span class="p">(</span><span class="n">filename_or_obj</span><span class="p">,</span> <span class="s2">&quot;png&quot;</span><span class="p">,</span> <span class="n">pil_kwargs</span><span class="p">,</span> <span class="n">metadata</span><span class="p">)</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/matplotlib/backends/backend_agg.py:445,</span> in <span class="ni">FigureCanvasAgg._print_pil</span><span class="nt">(self, filename_or_obj, fmt, pil_kwargs, metadata)</span>
<span class="g g-Whitespace">    </span><span class="mi">440</span><span class="w"> </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">441</span><span class="sd"> Draw the canvas, then save it using `.image.imsave` (to which</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span><span class="sd"> *pil_kwargs* and *metadata* are forwarded).</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span><span class="sd"> &quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">444</span> <span class="n">FigureCanvasAgg</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">445</span> <span class="n">mpl</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imsave</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>     <span class="n">filename_or_obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer_rgba</span><span class="p">(),</span> <span class="nb">format</span><span class="o">=</span><span class="n">fmt</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;upper&quot;</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>     <span class="n">dpi</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span> <span class="n">pil_kwargs</span><span class="o">=</span><span class="n">pil_kwargs</span><span class="p">)</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/matplotlib/image.py:1676,</span> in <span class="ni">imsave</span><span class="nt">(fname, arr, vmin, vmax, cmap, format, origin, dpi, metadata, pil_kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">1674</span> <span class="n">pil_kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;format&quot;</span><span class="p">,</span> <span class="nb">format</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1675</span> <span class="n">pil_kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;dpi&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">dpi</span><span class="p">,</span> <span class="n">dpi</span><span class="p">))</span>
<span class="ne">-&gt; </span><span class="mi">1676</span> <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="o">**</span><span class="n">pil_kwargs</span><span class="p">)</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/PIL/Image.py:2459,</span> in <span class="ni">Image.save</span><span class="nt">(self, fp, format, **params)</span>
<span class="g g-Whitespace">   </span><span class="mi">2456</span>         <span class="n">fp</span> <span class="o">=</span> <span class="n">builtins</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w+b&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2458</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2459</span>     <span class="n">save_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2460</span> <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">2461</span>     <span class="k">if</span> <span class="n">open_fp</span><span class="p">:</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/PIL/PngImagePlugin.py:1412,</span> in <span class="ni">_save</span><span class="nt">(im, fp, filename, chunk, save_all)</span>
<span class="g g-Whitespace">   </span><span class="mi">1408</span>     <span class="n">im</span> <span class="o">=</span> <span class="n">_write_multiple_frames</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1409</span>         <span class="n">im</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">chunk</span><span class="p">,</span> <span class="n">rawmode</span><span class="p">,</span> <span class="n">default_image</span><span class="p">,</span> <span class="n">append_images</span>
<span class="g g-Whitespace">   </span><span class="mi">1410</span>     <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1411</span> <span class="k">if</span> <span class="n">im</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1412</span>     <span class="n">ImageFile</span><span class="o">.</span><span class="n">_save</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">_idat</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">chunk</span><span class="p">),</span> <span class="p">[(</span><span class="s2">&quot;zip&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">im</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">rawmode</span><span class="p">)])</span>
<span class="g g-Whitespace">   </span><span class="mi">1414</span> <span class="k">if</span> <span class="n">info</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">1415</span>     <span class="k">for</span> <span class="n">info_chunk</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">chunks</span><span class="p">:</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/PIL/ImageFile.py:540,</span> in <span class="ni">_save</span><span class="nt">(im, fp, tile, bufsize)</span>
<span class="g g-Whitespace">    </span><span class="mi">538</span>     <span class="n">_encode_tile</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">tile</span><span class="p">,</span> <span class="n">bufsize</span><span class="p">,</span> <span class="n">fh</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">539</span> <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="n">io</span><span class="o">.</span><span class="n">UnsupportedOperation</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">540</span>     <span class="n">_encode_tile</span><span class="p">(</span><span class="n">im</span><span class="p">,</span> <span class="n">fp</span><span class="p">,</span> <span class="n">tile</span><span class="p">,</span> <span class="n">bufsize</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">541</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s2">&quot;flush&quot;</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">542</span>     <span class="n">fp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

<span class="nn">File /opt/anaconda3/envs/myenv/lib/python3.12/site-packages/PIL/ImageFile.py:559,</span> in <span class="ni">_encode_tile</span><span class="nt">(im, fp, tile, bufsize, fh, exc)</span>
<span class="g g-Whitespace">    </span><span class="mi">556</span> <span class="k">if</span> <span class="n">exc</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">557</span>     <span class="c1"># compress to Python file-compatible object</span>
<span class="g g-Whitespace">    </span><span class="mi">558</span>     <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">559</span>         <span class="n">errcode</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">bufsize</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
<span class="g g-Whitespace">    </span><span class="mi">560</span>         <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">561</span>         <span class="k">if</span> <span class="n">errcode</span><span class="p">:</span>

<span class="ne">KeyboardInterrupt</span>: 
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="legge-til-litt-effekter">
<h1>Legge til litt effekter üîÑ<a class="headerlink" href="#legge-til-litt-effekter" title="Link to this heading">#</a></h1>
<p>Det er ogs√• g√∏y med litt effekter n√•r vi skal formidle noe, bare det ikke blir s√• mye at det drar oppmerksomheten bort fra det vi skal formidle. I denne simuleringen er det veldig fristende √• lage en lite r√∏d prikk som ‚Äúleder‚Äù aksjekursen videre. Vi skal ogs√• legge til en liten tekst som forteller hva aksjekursen er:</p>
<section id="eksempel-8">
<h2>Eksempel 8:<a class="headerlink" href="#eksempel-8" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>

<span class="n">ypath</span><span class="o">=</span><span class="p">[]</span>
<span class="n">xpath</span><span class="o">=</span><span class="p">[]</span>

<span class="k">while</span> <span class="n">x</span><span class="o">&lt;</span><span class="mi">25</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">x</span><span class="o">+=</span> <span class="mf">0.1</span>
    <span class="n">y</span><span class="o">+=</span> <span class="n">dy</span>
    <span class="n">dy</span><span class="o">=</span><span class="mi">40</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span>


    <span class="n">xpath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ypath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    
    <span class="c1"># Placing the plot function inside the loop, ensures that it is plotted every iteration</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xpath</span><span class="p">,</span><span class="n">ypath</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;YARA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span><span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    
    <span class="c1"># Making dot:</span>
    <span class="n">c</span><span class="o">=</span><span class="n">Ellipse</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="mf">0.25</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
    
    <span class="c1"># Making text:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mf">0.1</span><span class="p">,</span><span class="n">y</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;NOK </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
    <span class="c1"># Jupyter only shows the last statement by default, so we need to add this </span>
    <span class="c1"># in order to plot at every iteration</span>
    <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    
    <span class="c1"># Makes sure the plot and output are ereased each time:</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">800</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">25</span><span class="p">])</span>
    <span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/64575a2933b032eeb224af048cc4038a34183204f7ea972d48a18240211057e5.png" src="../../_images/64575a2933b032eeb224af048cc4038a34183204f7ea972d48a18240211057e5.png" />
</div>
</div>
</section>
<section id="selv-om-det-gar-an-a-bruke-jupyter-og-matplotlib-til-a-lage-visuelle-effekter-gar-det-litt-tregt-om-du-skal-lage-noer-mer-avansert-den-mest-vanlige-pakken-for-a-lage-grafisk-brukergrensesnitt-i-python-heter-tkinter-vi-gar-imidlertid-ikke-inn-pa-denne-pakken-i-dette-kurset">
<h2><strong>Selv om det g√•r an √• bruke jupyter og matplotlib til √• lage visuelle effekter, g√•r det litt tregt om du skal lage noer mer avansert. Den mest vanlige pakken for √• lage grafisk brukergrensesnitt i Python heter ¬¥tkinter¬¥. Vi g√•r imidlertid ikke inn p√• denne pakken i dette kurset.</strong><a class="headerlink" href="#selv-om-det-gar-an-a-bruke-jupyter-og-matplotlib-til-a-lage-visuelle-effekter-gar-det-litt-tregt-om-du-skal-lage-noer-mer-avansert-den-mest-vanlige-pakken-for-a-lage-grafisk-brukergrensesnitt-i-python-heter-tkinter-vi-gar-imidlertid-ikke-inn-pa-denne-pakken-i-dette-kurset" title="Link to this heading">#</a></h2>
</section>
<section id="men-for-den-interesserte-under-her-er-et-eksempel-pa-kode-som-benytter-seg-av-tkinter-for-dynamisk-plotting">
<h2>Men for den interesserte - under her er et eksempel p√• kode som benytter seg av <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> for dynamisk plotting.<a class="headerlink" href="#men-for-den-interesserte-under-her-er-et-eksempel-pa-kode-som-benytter-seg-av-tkinter-for-dynamisk-plotting" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importerer n√∏dvendige bibliotek</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tk</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tkinter</span><span class="w"> </span><span class="kn">import</span> <span class="n">ttk</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.figure</span><span class="w"> </span><span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.backends.backend_tkagg</span><span class="w"> </span><span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">matplotlib.patches</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ellipse</span>

<span class="c1"># Initialiserer variablene</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">0</span>
<span class="n">xpath</span><span class="p">,</span> <span class="n">ypath</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>

<span class="c1"># Funksjon for √• oppdatere verdiene - og plotte underveis.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_plot</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">xpath</span><span class="p">,</span> <span class="n">ypath</span>

    <span class="n">x</span> <span class="o">+=</span> <span class="mf">0.5</span>
    <span class="n">y</span> <span class="o">+=</span> <span class="n">dy</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="mi">40</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span>

    <span class="n">xpath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ypath</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

    <span class="c1"># &quot;Vasker&quot; eller &quot;Cleare&#39;r&quot; det forrige plottet</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>

    <span class="c1"># Plot den oppdaterte &#39;path&#39;en.</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xpath</span><span class="p">,</span> <span class="n">ypath</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;YARA&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">,</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1"># Legg til &#39;sist&#39; punkt som en ellipse</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Ellipse</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

    <span class="c1"># Legg til tekst som viser den siste y-verdien</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;NOK </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="c1"># Tegn det oppdaterte plottet</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="c1"># Fortsett √• oppdater hvert 500 millisekund (0,5 sek)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Lager &quot;hovedvinduet&quot; (the main window)</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Dynamic Economic Visualization&#39;</span><span class="p">)</span>

<span class="c1"># Lager en ramme (frame) for matplotlib plottet</span>
<span class="n">frame</span> <span class="o">=</span> <span class="n">ttk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Lager en matplotlib figur</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>

<span class="c1"># Create a canvas to display the figure</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="n">frame</span><span class="p">)</span>
<span class="n">canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Start oppdateringsprosessen</span>
<span class="n">root</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">update_plot</span><span class="p">)</span>

<span class="c1"># Starter Tkinter loop&#39;en</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>invalid command name &quot;5144195392update_plot&quot;
    while executing
&quot;5144195392update_plot&quot;
    (&quot;after&quot; script)
2025-03-05 10:22:14.517 python[35716:4888226] +[IMKClient subclass]: chose IMKClient_Modern
2025-03-05 10:22:14.518 python[35716:4888226] +[IMKInputSession subclass]: chose IMKInputSession_Modern
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="numerisk-optimering">
<h1>üî¢ Numerisk optimering<a class="headerlink" href="#numerisk-optimering" title="Link to this heading">#</a></h1>
<p>Tidligere har vi funnet maksverdien av funksjoner ved √• bruke <strong>Sympy</strong> til √• derivere en funksjon, sette den lik null og l√∏se for <span class="math notranslate nohighlight">\(x\)</span>.</p>
<p>Men hva om det er vanskelig √• finne den optimale l√∏sningen analytisk? (Noe det ofte kan v√¶re!)</p>
<p>I slike tilfeller kan vi bruke <strong>numerisk optimering</strong>, der vi evaluerer objektfunksjonen (det vi √∏nsker √• maksimere) for mange ulike verdier og velger den beste.</p>
<section id="hva-gjor-vi-i-dette-eksemplet">
<h2>Hva gj√∏r vi i dette eksemplet?<a class="headerlink" href="#hva-gjor-vi-i-dette-eksemplet" title="Link to this heading">#</a></h2>
<p>Vi ser p√• en bedrift som selger <span class="math notranslate nohighlight">\(Q\)</span> enheter av en vare til pris <span class="math notranslate nohighlight">\(p\)</span>, med en kostnad per enhet <span class="math notranslate nohighlight">\(C\)</span>.<br />
Bedriftens <strong>fortjeneste</strong> (profit) er gitt ved:</p>
<p><span class="math notranslate nohighlight">\(p \cdot Q - C \cdot Q\)</span></p>
<p>Vi bruker numeriske metoder for √• finne verdien av <span class="math notranslate nohighlight">\(Q\)</span> som maksimerer fortjenesten.</p>
<p>Videre, antar vi at ettersp√∏rselfunksjonen (som bestemmer <span class="math notranslate nohighlight">\(Q\)</span>) er definert slik:</p>
<p><span class="math notranslate nohighlight">\(100 - p\)</span></p>
<p>Selv om vi i dette tilfellet enkelt kan finne maksimum analytisk med <strong>Sympy</strong>, kan vi bruke dette eksempelet for √• sjekke at den numeriske l√∏sningen er korrekt.</p>
<p>Numerisk optimering er nyttig n√•r:</p>
<ul class="simple">
<li><p>Funksjonen er <strong>komplisert</strong> og vanskelig √• derivere.</p></li>
<li><p>Vi har <strong>diskrete verdier</strong> der derivasjon ikke er praktisk.</p></li>
<li><p>Vi √∏nsker √• <strong>visualisere hvordan l√∏sningen varierer</strong> over et bredt spekter av verdier.</p></li>
</ul>
<p>La oss n√• implementere dette i Python i eksemplene under!</p>
</section>
<section id="eksempel-11">
<h2>Eksempel 11:<a class="headerlink" href="#eksempel-11" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definerer fortjenestefunksjonen, som avhenger av en ettersp√∏rsel.</span>
<span class="k">def</span><span class="w"> </span><span class="nf">profit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Beregner profitt gitt pris p og kostnad per enhet C.&quot;&quot;&quot;</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="n">demand</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p</span> <span class="o">*</span> <span class="n">Q</span> <span class="o">-</span> <span class="n">C</span> <span class="o">*</span> <span class="n">Q</span>
</pre></div>
</div>
</div>
</div>
<p>Q bestemmes av en ettersp√∏rselfunksjon.</p>
<section id="eksempel-12">
<h3>Eksempel 12<a class="headerlink" href="#eksempel-12" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definerer ettersp√∏rselfunksjonen</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demand</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returnerer antall enheter solgt gitt en pris p.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">p</span>
</pre></div>
</div>
</div>
</div>
<p>Vi kan n√• finne optimum numerisk, alts√• tallverdiene (optimal pris og hva maksimal profitt er ved denne optimale prisen.)</p>
</section>
<section id="eksempel-13">
<h3>Eksempel 13:<a class="headerlink" href="#eksempel-13" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">find_optimal_price</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finner optimal pris i prisintervallet (start, end)&quot;&quot;&quot;</span>
    <span class="n">max_profit</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
    <span class="n">optimal_price</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">n_samples</span> <span class="o">=</span> <span class="mi">1000</span>
    
    <span class="c1"># Itererer over pris-intervallet (start, end)</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">n_samples</span><span class="p">):</span>
        <span class="n">current_profit</span> <span class="o">=</span> <span class="n">profit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">current_profit</span> <span class="o">&gt;</span> <span class="n">max_profit</span><span class="p">:</span>
            <span class="c1"># Hvis &#39;profit&#39; g√•r over &#39;current profit&#39;, s√• lagrer vi den nye &#39;profit&#39; og pris</span>
            <span class="n">max_profit</span> <span class="o">=</span> <span class="n">current_profit</span>
            <span class="n">optimal_price</span> <span class="o">=</span> <span class="n">p</span>

    <span class="k">return</span> <span class="n">optimal_price</span><span class="p">,</span> <span class="n">max_profit</span>


<span class="n">cost</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">start_price</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end_price</span> <span class="o">=</span> <span class="mi">100</span>

<span class="n">optimal_price</span><span class="p">,</span> <span class="n">max_profit</span> <span class="o">=</span> <span class="n">find_optimal_price</span><span class="p">(</span><span class="n">start_price</span><span class="p">,</span> <span class="n">end_price</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimal pris: </span><span class="si">{</span><span class="n">optimal_price</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maksimal profitt ved optimal pris: </span><span class="si">{</span><span class="n">max_profit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimal pris: 52.452452452452455
Maksimal profitt ved optimal pris: 2256.247739230722
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">### Vi visualiserer profit funksjonen over - for √• se om resultatet virker rimelig ###</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>


<span class="c1"># Kostnad per enhet ost, start_price og end_price (du kan justere denne verdien)</span>
<span class="n">cost</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">start_price</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">end_price</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c1"># Lag en array med p-verdier fra 0 til 100</span>
<span class="n">p_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">start_price</span><span class="p">,</span> <span class="n">end_price</span><span class="p">,</span> <span class="mi">500</span><span class="p">)</span>

<span class="c1"># Beregn profitt for hver p-verdi</span>
<span class="n">profit_values</span> <span class="o">=</span> <span class="p">[</span><span class="n">profit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_values</span><span class="p">]</span>

<span class="c1"># Plotter profittfunksjonen</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p_values</span><span class="p">,</span> <span class="n">profit_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Profitt&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Profitt som funksjon av pris&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Pris (p)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Profitt&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2500</span><span class="p">)</span>  <span class="c1"># Setter y-aksen fra 0 til 3000</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>   <span class="c1"># Setter x-aksen fra 0 til 150</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">optimal_price</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;p = </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">optimal_price</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/4d590a9ea1cfd1bb95178b93d8205863def5abf51f160f7face6f95476d4a72a.png" src="../../_images/4d590a9ea1cfd1bb95178b93d8205863def5abf51f160f7face6f95476d4a72a.png" />
</div>
</div>
<p>Det ser ut som at optimal prisen p√• dr√∏ye <span class="math notranslate nohighlight">\(52\)</span> passer godt til √• v√¶re optimalpris!</p>
<p>Vi kan verifisere dette enda en gang, ved hjelp av <code class="docutils literal notranslate"><span class="pre">SymPy</span></code>.</p>
</section>
<section id="eksempel-14">
<h3>Eksempel 14:<a class="headerlink" href="#eksempel-14" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sympy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sp</span>

<span class="c1"># Definerer variabelen p (pris)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">Symbol</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>

<span class="c1"># Kostnad C er satt til 30</span>
<span class="n">C</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c1"># Ettersp√∏rselsfunksjon</span>
<span class="k">def</span><span class="w"> </span><span class="nf">demand</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">100</span> <span class="o">-</span> <span class="n">p</span>

<span class="k">def</span><span class="w"> </span><span class="nf">profit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Beregner profitt gitt pris p og kostnad per enhet C.&quot;&quot;&quot;</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="n">demand</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">p</span> <span class="o">*</span> <span class="n">Q</span> <span class="o">-</span> <span class="n">C</span> <span class="o">*</span> <span class="n">Q</span>

<span class="c1"># Deriverer profittfunksjonen med hensyn til p</span>
<span class="n">profit_derivative</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">profit</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">C</span><span class="p">),</span> <span class="n">p</span><span class="p">)</span>

<span class="c1"># Finn den optimale p-verdien ved √• l√∏se ligningen profit_derivative = 0</span>
<span class="n">optimal_p</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">profit_derivative</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>

<span class="c1"># Viser den optimale prisen</span>
<span class="n">optimal_p_value</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">optimal_p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">optimal_p_value</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_latex math notranslate nohighlight">
\[\displaystyle 52.5\]</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="monte-carlo-simulering">
<h1>Monte Carlo-simulering üñ•Ô∏è üé≤ üìä<a class="headerlink" href="#monte-carlo-simulering" title="Link to this heading">#</a></h1>
<p>Monte Carlo-simulering er en metode for √• estimere resultater ved hjelp av tilfeldige pr√∏ver.<br />
Denne teknikken er spesielt nyttig n√•r det er <strong>usikkerhet</strong> i dataene eller <strong>mange mulige utfall</strong>.</p>
<section id="hvorfor-bruke-monte-carlo-simulering">
<h2>üîπ Hvorfor bruke Monte Carlo-simulering?<a class="headerlink" href="#hvorfor-bruke-monte-carlo-simulering" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Mange √∏konomiske prosesser, som <strong>investeringer og l√∏nnsvekst</strong>, er usikre.</p></li>
<li><p>Deterministiske modeller fanger <strong>ikke opp tilfeldigheter</strong>, noe Monte Carlo-simulering gj√∏r.</p></li>
<li><p>Vi kan bruke denne teknikken for √• lage <strong>sannsynlighetsfordelinger</strong> og forutsi mulige utfall.</p></li>
</ul>
<p>I dette eksempelet ser vi p√• <strong>inntektsutvikling</strong> over tid, hvor inntekten hvert √•r avhenger av fjor√•ret.</p>
<ul class="simple">
<li><p><strong>Vi starter med en gitt inntekt</strong> og antar en √•rlig vekstrate (√©n prosent).</p></li>
<li><p><strong>Hvert √•r legges en tilfeldig variasjon til</strong>, som representerer usikkerhet.</p></li>
<li><p>Vi kj√∏rer simuleringen mange ganger for √• se hvordan inntekten utvikler seg over tid.</p></li>
</ul>
<p>Vi starter med √• definere en funksjon som beregner neste √•rs inntekt, basert p√• fjor√•ret og et tilfeldig bidrag:</p>
<section id="eksempel-15">
<h3>Eksempel 15<a class="headerlink" href="#eksempel-15" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calc_income</span><span class="p">(</span><span class="n">last_year_income</span><span class="p">,</span> <span class="n">growth_rate</span><span class="p">,</span> <span class="n">volatility</span><span class="p">):</span>
    
    <span class="n">random_growth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">volatility</span><span class="p">)</span>
    <span class="n">growth</span> <span class="o">=</span>  <span class="n">growth_rate</span> <span class="o">+</span> <span class="n">random_growth</span>
    
    <span class="n">income</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">last_year_income</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">growth</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">income</span>

<span class="c1"># Her antar vi at fjor√•rets l√∏nn er 600.000kr, med 5% forventet inntekts√∏kning og 2% usikkerhet</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hvis fjor√•rets l√∏nn er 600.000 kr, s√• er √•rets l√∏nn </span><span class="si">{</span><span class="n">calc_income</span><span class="p">(</span><span class="mi">600000</span><span class="p">,</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="mf">0.02</span><span class="p">)</span><span class="si">}</span><span class="s1">, hvis vi har 5% forventet l√∏nns√∏kning og 2% usikkerhet.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Hvis fjor√•rets l√∏nn er 600.000 kr, s√• er √•rets l√∏nn 638974, hvis vi har 5% forventet l√∏nns√∏kning og 2% usikkerhet.
</pre></div>
</div>
</div>
</div>
</section>
<section id="sa-lager-vi-en-funksjon-som-lager-en-inntektssti-income-path-for-et-gitt-antall-ars-inntekt-dette-kalles-en-sti-path-fordi-dagens-inntekt-er-avhengig-av-garsdagen-dagens-situasjon-er-altsa-avhengig-av-hvilken-sti-inntekten-har-fulgt-i-alle-tidligere-ar">
<h3><strong>S√• lager vi en funksjon som lager en ‚Äúinntektssti‚Äù (income path) for et gitt antall √•rs inntekt. Dette kalles en ‚Äústi‚Äù/‚Äùpath‚Äù fordi dagens inntekt er avhengig av g√•rsdagen. Dagens situasjon er alts√• avhengig av hvilken sti inntekten har fulgt i alle tidligere √•r.</strong><a class="headerlink" href="#sa-lager-vi-en-funksjon-som-lager-en-inntektssti-income-path-for-et-gitt-antall-ars-inntekt-dette-kalles-en-sti-path-fordi-dagens-inntekt-er-avhengig-av-garsdagen-dagens-situasjon-er-altsa-avhengig-av-hvilken-sti-inntekten-har-fulgt-i-alle-tidligere-ar" title="Link to this heading">#</a></h3>
</section>
<section id="eksempel-16">
<h3>Eksempel 16<a class="headerlink" href="#eksempel-16" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">income_path</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">initial_income</span><span class="p">,</span> <span class="n">growth_rate</span><span class="p">,</span> <span class="n">volatility</span><span class="p">):</span>
    
    <span class="n">incomes</span> <span class="o">=</span> <span class="p">[</span><span class="n">initial_income</span><span class="p">]</span>
    
    <span class="c1">#simulating a single income path:</span>
    <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">years</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>

        <span class="c1">#calculating income:</span>
        <span class="n">income</span> <span class="o">=</span> <span class="n">calc_income</span><span class="p">(</span><span class="n">incomes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">growth_rate</span><span class="p">,</span> <span class="n">volatility</span><span class="p">)</span>

        <span class="c1">#adding income for year to the path</span>
        <span class="n">incomes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">income</span><span class="p">)</span>
        
    <span class="k">return</span> <span class="n">incomes</span>

<span class="c1">#regner ut for fem √•r:</span>

<span class="n">income_path</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">600000</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[600000, 657670, 698291, 744281, 786521]
</pre></div>
</div>
</div>
</div>
</section>
<section id="vi-kan-na-lage-en-funksjon-som-simulerer-et-gitt-antall-inntektsstier-gitt-ved-num-simulations">
<h3><strong>Vi kan n√• lage en funksjon som simulerer et gitt antall inntektsstier gitt ved <code class="docutils literal notranslate"><span class="pre">num_simulations</span></code>:</strong><a class="headerlink" href="#vi-kan-na-lage-en-funksjon-som-simulerer-et-gitt-antall-inntektsstier-gitt-ved-num-simulations" title="Link to this heading">#</a></h3>
</section>
<section id="eksempel-17">
<h3>Eksempel 17:<a class="headerlink" href="#eksempel-17" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">def</span><span class="w"> </span><span class="nf">simulate_income</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">initial_income</span><span class="p">,</span> <span class="n">growth_rate</span><span class="p">,</span> <span class="n">volatility</span><span class="p">,</span> <span class="n">num_simulations</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returnerer en 2D-array med simulerte inntekter for hvert √•r.&quot;&quot;&quot;</span>
    <span class="c1"># Starter med en tom liste, hvor vi skal fylle p√• med tall</span>
    <span class="n">all_incomes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_simulations</span><span class="p">):</span>
        <span class="c1"># Legger til &quot;the path&quot; til variabelesn &#39;all_incomes&#39;</span>
        <span class="n">incomes</span> <span class="o">=</span> <span class="n">income_path</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">initial_income</span><span class="p">,</span> <span class="n">growth_rate</span><span class="p">,</span> <span class="n">volatility</span><span class="p">)</span>
        <span class="n">all_incomes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">incomes</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
        
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">all_incomes</span><span class="p">)</span>

<span class="c1"># Setter inn i pandas DataFrame for √• f√• en visuelt, finere tabell</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">simulate_income</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">600000</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>600000</td>
      <td>623765</td>
      <td>647373</td>
      <td>685550</td>
      <td>725024</td>
    </tr>
    <tr>
      <th>1</th>
      <td>600000</td>
      <td>631870</td>
      <td>648402</td>
      <td>687084</td>
      <td>708483</td>
    </tr>
    <tr>
      <th>2</th>
      <td>600000</td>
      <td>606863</td>
      <td>646579</td>
      <td>658326</td>
      <td>686932</td>
    </tr>
    <tr>
      <th>3</th>
      <td>600000</td>
      <td>623525</td>
      <td>653266</td>
      <td>682108</td>
      <td>700883</td>
    </tr>
    <tr>
      <th>4</th>
      <td>600000</td>
      <td>636327</td>
      <td>659763</td>
      <td>684558</td>
      <td>717616</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Figure size 1000x500 with 0 Axes&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section id="vi-kan-na-plotte-fordelingen-for-a-fa-et-inntrykk-av-fordelingen-til-inntekten-i-avslutningsaret">
<h3><strong>Vi kan n√• plotte fordelingen, for √• f√• et inntrykk av fordelingen til inntekten i avslutnings√•ret:</strong><a class="headerlink" href="#vi-kan-na-plotte-fordelingen-for-a-fa-et-inntrykk-av-fordelingen-til-inntekten-i-avslutningsaret" title="Link to this heading">#</a></h3>
</section>
<section id="eksempel-18">
<h3>Eksempel 18:<a class="headerlink" href="#eksempel-18" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Parametere</span>
<span class="n">initial_income</span> <span class="o">=</span> <span class="mi">600000</span>   <span class="c1"># Start-inntekt</span>
<span class="n">growth_rate</span> <span class="o">=</span> <span class="mf">0.03</span>        <span class="c1"># Forventet l√∏nnsvekst (prosent)</span>
<span class="n">volatility</span> <span class="o">=</span> <span class="mf">0.02</span>         <span class="c1"># Volatilitet (usikkerhet)</span>
<span class="n">years</span> <span class="o">=</span> <span class="mi">30</span>                <span class="c1"># Antall √•r</span>
<span class="n">num_simulations</span> <span class="o">=</span> <span class="mi">1000</span>    <span class="c1"># Antall simuleringer</span>

<span class="n">simulated_incomes</span> <span class="o">=</span> <span class="n">simulate_income</span><span class="p">(</span><span class="n">years</span><span class="p">,</span> <span class="n">initial_income</span><span class="p">,</span> <span class="n">growth_rate</span><span class="p">,</span> <span class="n">volatility</span><span class="p">,</span> <span class="n">num_simulations</span><span class="p">)</span>

<span class="c1"># plotting the final income</span>
<span class="n">final_year_incomes</span> <span class="o">=</span> <span class="n">simulated_incomes</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">final_year_incomes</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">plt</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">loc</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{:,}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribusjon av simulerte inntekter etter 30 √•r&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Inntekt&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Antall simuleringer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/c37cc96eac559b96e71d8164845a90164f617ce981eb8ddcdc070d71ee93163b.png" src="../../_images/c37cc96eac559b96e71d8164845a90164f617ce981eb8ddcdc070d71ee93163b.png" />
</div>
</div>
</section>
</section>
<section id="ekstra-visualisering-plotte-flere-inntektsstier">
<h2><strong>Ekstra visualisering: Plotte flere inntektsstier</strong><a class="headerlink" href="#ekstra-visualisering-plotte-flere-inntektsstier" title="Link to this heading">#</a></h2>
<p>Eksempel 18 (rett over), viser distribusjon (fordelingen) av simulerte inntekter etter <span class="math notranslate nohighlight">\(30\)</span> √•r - hvor startinntekten var p√• <span class="math notranslate nohighlight">\(600 \; 000\)</span> kr.</p>
<p>For √• vise hvordan ulike simuleringer utvikler seg over tid, kan vi legge til en graf som viser hvordan inntektsbanene utviklet seg.</p>
<p>Eksempel 19:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>  <span class="c1"># Plotter de 1000 inntektsstiene fra over</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulated_incomes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Simulerte inntektsbaner over tid&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;√Ör&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Inntekt (MNOK)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/da38975950df698658ca97f17c567f430c0a9f9aafe132448c87ca550e77eb28.png" src="../../_images/da38975950df698658ca97f17c567f430c0a9f9aafe132448c87ca550e77eb28.png" />
</div>
</div>
</section>
<section id="ekstra-ekstra-ikke-pensum-men-kjekt-a-vite-om">
<h2><strong>Ekstra-Ekstra IKKE PENSUM, MEN KJEKT √Ö VITE OM</strong><a class="headerlink" href="#ekstra-ekstra-ikke-pensum-men-kjekt-a-vite-om" title="Link to this heading">#</a></h2>
<p>Vi kan lage flotte plots, ved hjelp av noe som heter Plotly. Se kodeblokken under, for eksempel:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">plotly.graph_objects</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">go</span>

<span class="c1"># Assuming simulated_incomes is already defined</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>

<span class="c1"># Lager en loop som g√•r igjennom de 10 f√∏rste simulerte inntekts-path&#39;ene</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
        <span class="n">x</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2005</span><span class="p">,</span> <span class="mi">2023</span><span class="p">)),</span>  <span class="c1"># √Örstall fra 2005 til 2022</span>
        <span class="n">y</span><span class="o">=</span><span class="n">simulated_incomes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
        <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines&#39;</span><span class="p">,</span>
        <span class="n">line</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>  <span class="c1"># Customize line width if needed</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>  <span class="c1"># Set the opacity for the lines</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Inntektssti nr. </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">None</span>  <span class="c1"># Only label the first line</span>
    <span class="p">))</span>

<span class="c1"># Oppdater layout</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Simulerte inntektsbaner over tid&quot;</span><span class="p">,</span>
    <span class="n">xaxis_title</span><span class="o">=</span><span class="s2">&quot;√Ör&quot;</span><span class="p">,</span>
    <span class="n">yaxis_title</span><span class="o">=</span><span class="s2">&quot;Inntekt (MNOK)&quot;</span><span class="p">,</span>
    <span class="n">showlegend</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>

<span class="c1"># Vis figuren</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="oppgaver">
<h1>Oppgaver<a class="headerlink" href="#oppgaver" title="Link to this heading">#</a></h1>
<section id="oppgave-1-simulering-av-aksjekurs">
<h2>Oppgave 1 - üìà Simulering av aksjekurs<a class="headerlink" href="#oppgave-1-simulering-av-aksjekurs" title="Link to this heading">#</a></h2>
<p>En aksjekurs beveger seg tilfeldig over tid. Vi antar at aksjen starter p√• <strong>100 kroner</strong> og endrer seg tilfeldig for hver tidsperiode.</p>
<ul class="simple">
<li><p><strong>Lag en simulering av aksjekursen over 100 dager</strong></p></li>
<li><p>Hver dag endrer aksjekursen seg med en tilfeldig verdi mellom -3% og +3%</p></li>
<li><p>Plott kursutviklingen</p></li>
</ul>
<p>*Tips: Bruk en for-l√∏kke og lagre verdiene i en liste! *</p>
<p>Koden kan gjerne starte noe ala dette:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Parametere</span>
<span class="n">days</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">price</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[</span><span class="n">price</span><span class="p">]</span>

<span class="c1"># Fortsett koden under - simulering og plotting</span>
</pre></div>
</div>
</section>
<section id="oppgave-2-simulering-av-bedriftens-overskudd">
<h2>Oppgave 2 - üè¢ Simulering av bedriftens overskudd<a class="headerlink" href="#oppgave-2-simulering-av-bedriftens-overskudd" title="Link to this heading">#</a></h2>
<p>En bedrift selger <strong>Q</strong> produkter til pris <strong>p</strong>, og produksjonskostnaden per enhet er <strong>C</strong>.<br />
Overskuddet beregnes som:</p>
<p><span class="math notranslate nohighlight">\(\text{Overskudd} = Q \cdot p - Q \cdot C\)</span></p>
<p><strong>Lag en simulering der</strong>:</p>
<ul class="simple">
<li><p><strong>Q</strong> varierer mellom 900 og 1100</p></li>
<li><p><strong>p</strong> varierer mellom 90 og 110</p></li>
<li><p><strong>C</strong> varierer mellom 50 og 70</p></li>
</ul>
<ul class="simple">
<li><p>Kj√∏r simuleringen <strong>1000 ganger</strong></p></li>
<li><p>Plott histogram av overskuddet</p></li>
</ul>
<p><em>Tips: Bruk numpy for √• generere tilfeldige verdier!</em></p>
</section>
<section id="oppgave-3-simulering-av-lanekostnader">
<h2>Oppgave 3 - üí∞ Simulering av l√•nekostnader<a class="headerlink" href="#oppgave-3-simulering-av-lanekostnader" title="Link to this heading">#</a></h2>
<p>Du tar opp et boligl√•n p√• <strong>2 000 000 kr</strong>. Renten er i utgangspunktet <strong>3%</strong>, men den varierer tilfeldig mellom <strong>2% og 5%</strong> hvert √•r.</p>
<ul class="simple">
<li><p><strong>Simuler utviklingen i l√•nekostnader over 30 √•r</strong></p></li>
<li><p>Beregn den totale rentekostnaden etter 30 √•r</p></li>
<li><p>Kj√∏r simuleringen <strong>500 ganger</strong>, og plott fordelingen av totale rentekostnader</p></li>
</ul>
</section>
<section id="oppgave-4-simulering-av-lagerstyring-og-ettersporsel">
<h2>Oppgave 4 - üì¶ Simulering av lagerstyring og ettersp√∏rsel<a class="headerlink" href="#oppgave-4-simulering-av-lagerstyring-og-ettersporsel" title="Link to this heading">#</a></h2>
<p>Et selskap h√•ndterer en vare med en ukentlig ettersp√∏rsel som varierer mellom <strong>80 og 120 enheter</strong>.<br />
De bestiller varer hver uke basert p√• en prognose, men <strong>det er alltid en usikkerhet p√• ¬±10% i ettersp√∏rselen</strong>.</p>
<ul class="simple">
<li><p><strong>Simuler lagerbeholdning over 52 uker</strong></p></li>
<li><p>Start med et lager p√• <strong>500 enheter</strong></p></li>
<li><p>Hvis lageret g√•r under <strong>100 enheter</strong>, bestilles <strong>200 nye enheter</strong></p></li>
<li><p>Plott utviklingen i lagerbeholdning over tid</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="oppgave-5-simuleringer">
<h1>Oppgave 5 - Simuleringer üí∞üé≤üí∞<a class="headerlink" href="#oppgave-5-simuleringer" title="Link to this heading">#</a></h1>
<p>Du er p√• tur med vennegjengen din p√• casino i Monaco, og spiller et (fiktivt) terningspill.</p>
<p>Du vet at en vanlig terning f√∏lger en <span class="math notranslate nohighlight">\(\textit{diskret uniform fordeling}\)</span>, hvor det er like stor sannsynlighet for hvert <span class="math notranslate nohighlight">\(\textit{utfall}\)</span> (alts√• om terningen viser <span class="math notranslate nohighlight">\(1, \; 2, \; 3, \; 4, \; 5\)</span> eller <span class="math notranslate nohighlight">\(6\)</span>).</p>
<p>I statistikk, snakker vi ofte om <span class="math notranslate nohighlight">\(\textit{forventningsverdi}\)</span> (skrives <span class="math notranslate nohighlight">\(E[X]\)</span>), som sier noe om hva vi forventer en tilfeldig variabel <span class="math notranslate nohighlight">\(X\)</span> vil v√¶re. For diskret problemer er det definert som
$<span class="math notranslate nohighlight">\(E[X] = \sum_{i=1}^{n}x_i \cdot P(X=x_i)\)</span>$</p>
<p>hvor <span class="math notranslate nohighlight">\(x_i\)</span> er verdien av terningen, og <span class="math notranslate nohighlight">\(P(X=x_i)\)</span> er sannsynligheten for √• f√• verdien <span class="math notranslate nohighlight">\(x_i\)</span> p√• et kast. Vi vet at <span class="math notranslate nohighlight">\(n=6\)</span>, ettersom det er <span class="math notranslate nohighlight">\(6\)</span> ulike utfall av en terning. Da kan vi skrive det ut slik:
$<span class="math notranslate nohighlight">\(E[X] = 1 \cdot \frac{1}{6} + 2 \cdot \frac{1}{6} + \cdots + 6 \cdot \frac{1}{6}\)</span><span class="math notranslate nohighlight">\(
regner vi ut dette ser vi at vi f√•r
\)</span><span class="math notranslate nohighlight">\(E[X] =3,5\)</span>$</p>
<p>Dermed er forventningsverdien til en terning lik <span class="math notranslate nohighlight">\(3,5\)</span>.</p>
<section id="case">
<h2>Case<a class="headerlink" href="#case" title="Link to this heading">#</a></h2>
<p>I dette fiktive terningsspillet i Monaco skal man trille to terninger, samtidig. Man vinner spillet hvis summen av de to terningene er <em>over eller lik</em> <span class="math notranslate nohighlight">\(9\)</span>.
Du kommer p√• at du kan simulere utfall ved hjelp av Python og Numpy.</p>
</section>
<section id="oppgave-5-1">
<h2>Oppgave 5.1<a class="headerlink" href="#oppgave-5-1" title="Link to this heading">#</a></h2>
<p>Bruk simulering, til √• finne ut sannsynligheten for at du triller to treninger med sum <span class="math notranslate nohighlight">\(\textbf{over eller lik}\)</span> <span class="math notranslate nohighlight">\(9\)</span>.</p>
<ul class="simple">
<li><p>Visualiser utfallene ved bruk av et histogram.</p></li>
<li><p>Antall simuleringer skal dere velge selv, men kommenter hvorfor dere velger som dere gj√∏r.</p></li>
<li><p>Under er et lite kodehint for hva dere kan ta i bruk.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>        <span class="c1"># Mulige bibliotek for oppgaven.</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">random</span>

        <span class="c1"># Du kan f√• bruk for funksjonen (hvor argumentene m√• spesifiseres i henhold til oppgaven). Hvor low = inkludert, high = ekskludert.</span>
        <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="oppgave-5-2">
<h2>Oppgave 5.2<a class="headerlink" href="#oppgave-5-2" title="Link to this heading">#</a></h2>
<p>Finn ut hvor mange kast av to terninger m√• du ta (<span class="math notranslate nohighlight">\(n\)</span>) for at sannsynligheten for √• f√• en sum over eller lik <span class="math notranslate nohighlight">\(9\)</span> minst √©n gang er over <span class="math notranslate nohighlight">\(90\)</span>%.</p>
<p>Hint - formelen for √• finne sannsynligheten for at summen er over eller lik 9, minst √©n gang er gitt som f√∏lgende:
$<span class="math notranslate nohighlight">\(P(\text{summen} \geq 9 \text{ minst √©n gang}) = 1 - \left(P(\text{summen} &lt; 9)\right)^n\)</span>$</p>
<p>hvor <span class="math notranslate nohighlight">\(P\left(\text{summen} &lt; 9\right)\)</span> kan finnes fra simuleringen over.</p>
<p>Bruk <code class="docutils literal notranslate"><span class="pre">sympy</span></code> for √• l√∏se dette problemet, og si hvor mange ganger (<span class="math notranslate nohighlight">\(n\)</span>) vi m√• trille terningen.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks\10"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../09/sympy.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">8 - SymPy</p>
      </div>
    </a>
    <a class="right-next"
       href="../00/knowledge_test.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Kunnskapstest</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">9 - Simulering</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#for-lokker">For-l√∏kker</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-1">Eksempel 1:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-2">Eksempel 2:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-3">Eksempel 3:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-4">Eksempel 4</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#while-lokker">While-l√∏kker</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-5">Eksempel 5:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dette-leder-oss-inn-pa-denne-notatboken-sitt-tema-simuleringer">Dette leder oss inn p√• denne notatboken sitt tema - <strong>Simuleringer</strong> üìä üìà üìâ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulering-av-aksjekurs">Simulering av aksjekurs üíπ</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-6">Eksempel 6:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simulering-av-stokastisk-bevegelse-forklaring-av-koden-fra-eksempel-6">Simulering av stokastisk bevegelse - forklaring av koden fra eksempel 6</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#hvordan-fungerer-simuleringen">üîπ Hvordan fungerer simuleringen?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#forklaring-av-kode">üîπ Forklaring av kode:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dynamisk-plott">Dynamisk plott üìâ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#viktig-a-merke-seg">üîπ Viktig √• merke seg:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-7">Eksempel 7:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#legge-til-litt-effekter">Legge til litt effekter üîÑ</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-8">Eksempel 8:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selv-om-det-gar-an-a-bruke-jupyter-og-matplotlib-til-a-lage-visuelle-effekter-gar-det-litt-tregt-om-du-skal-lage-noer-mer-avansert-den-mest-vanlige-pakken-for-a-lage-grafisk-brukergrensesnitt-i-python-heter-tkinter-vi-gar-imidlertid-ikke-inn-pa-denne-pakken-i-dette-kurset"><strong>Selv om det g√•r an √• bruke jupyter og matplotlib til √• lage visuelle effekter, g√•r det litt tregt om du skal lage noer mer avansert. Den mest vanlige pakken for √• lage grafisk brukergrensesnitt i Python heter ¬¥tkinter¬¥. Vi g√•r imidlertid ikke inn p√• denne pakken i dette kurset.</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#men-for-den-interesserte-under-her-er-et-eksempel-pa-kode-som-benytter-seg-av-tkinter-for-dynamisk-plotting">Men for den interesserte - under her er et eksempel p√• kode som benytter seg av <code class="docutils literal notranslate"><span class="pre">tkinter</span></code> for dynamisk plotting.</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#numerisk-optimering">üî¢ Numerisk optimering</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hva-gjor-vi-i-dette-eksemplet">Hva gj√∏r vi i dette eksemplet?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-11">Eksempel 11:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-12">Eksempel 12</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-13">Eksempel 13:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-14">Eksempel 14:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#monte-carlo-simulering">Monte Carlo-simulering üñ•Ô∏è üé≤ üìä</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hvorfor-bruke-monte-carlo-simulering">üîπ Hvorfor bruke Monte Carlo-simulering?</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-15">Eksempel 15</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sa-lager-vi-en-funksjon-som-lager-en-inntektssti-income-path-for-et-gitt-antall-ars-inntekt-dette-kalles-en-sti-path-fordi-dagens-inntekt-er-avhengig-av-garsdagen-dagens-situasjon-er-altsa-avhengig-av-hvilken-sti-inntekten-har-fulgt-i-alle-tidligere-ar"><strong>S√• lager vi en funksjon som lager en ‚Äúinntektssti‚Äù (income path) for et gitt antall √•rs inntekt. Dette kalles en ‚Äústi‚Äù/‚Äùpath‚Äù fordi dagens inntekt er avhengig av g√•rsdagen. Dagens situasjon er alts√• avhengig av hvilken sti inntekten har fulgt i alle tidligere √•r.</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-16">Eksempel 16</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vi-kan-na-lage-en-funksjon-som-simulerer-et-gitt-antall-inntektsstier-gitt-ved-num-simulations"><strong>Vi kan n√• lage en funksjon som simulerer et gitt antall inntektsstier gitt ved <code class="docutils literal notranslate"><span class="pre">num_simulations</span></code>:</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-17">Eksempel 17:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#vi-kan-na-plotte-fordelingen-for-a-fa-et-inntrykk-av-fordelingen-til-inntekten-i-avslutningsaret"><strong>Vi kan n√• plotte fordelingen, for √• f√• et inntrykk av fordelingen til inntekten i avslutnings√•ret:</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eksempel-18">Eksempel 18:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ekstra-visualisering-plotte-flere-inntektsstier"><strong>Ekstra visualisering: Plotte flere inntektsstier</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ekstra-ekstra-ikke-pensum-men-kjekt-a-vite-om"><strong>Ekstra-Ekstra IKKE PENSUM, MEN KJEKT √Ö VITE OM</strong></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgaver">Oppgaver</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-1-simulering-av-aksjekurs">Oppgave 1 - üìà Simulering av aksjekurs</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-2-simulering-av-bedriftens-overskudd">Oppgave 2 - üè¢ Simulering av bedriftens overskudd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-3-simulering-av-lanekostnader">Oppgave 3 - üí∞ Simulering av l√•nekostnader</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-4-simulering-av-lagerstyring-og-ettersporsel">Oppgave 4 - üì¶ Simulering av lagerstyring og ettersp√∏rsel</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-5-simuleringer">Oppgave 5 - Simuleringer üí∞üé≤üí∞</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#case">Case</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-5-1">Oppgave 5.1</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#oppgave-5-2">Oppgave 5.2</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By setternoeher
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>