---
title: '[< Forrige](7.1%20-%20matplotlib.ipynb)     |     [Neste >](8%20-%20sympy.ipynb)'
jupyter: python3
---



<span style="color:#9bb1d4;font-size:30px;font-weight:900"> 7.2 - SeaBorn </span>  

# Introduksjon til Seaborn

Seaborn er et kraftig Python-bibliotek for visualiseringer bygget p√• toppen av Matplotlib. Det er spesielt designet for √• h√•ndtere statistiske grafer og integrerer godt med `Pandas` og `Numpy`, som gj√∏r det enklere √• lage komplekse visualiseringer med f√• linjer kode.

## Hvorfor bruke Seaborn?
- **Forenkler komplekse visualiseringer**: Seaborn tilbyr enkle m√•ter √• lage statistiske visualiseringer som scatter plots, heatmaps, linjeplott og boxplots.
- **Bra for statistisk analyse**: Det gir innebygde metoder for regresjonsanalyse og plotting av distribusjoner, som gj√∏r det sv√¶rt nyttig for datavitenskap.
- **Estetisk tiltalende**: Grafene som Seaborn produserer er ofte mer stilige og estetisk tilfredsstillende, sammenlignet med de som lages med `matplotlib`.
- **Integrasjon med Pandas**: Seaborn fungerer s√∏ml√∏st med Pandas DataFrames, noe som gj√∏r det enkelt √• plotte data direkte fra databehandlingen.

## Hva kan Seaborn brukes til?
Seaborn brukes for mange ulike typer visualiseringer, inkludert:
- **Scatter plots** (for √• vise forhold mellom to variabler)
- **Bar plots** (for √• vise sammenligninger mellom kategorier)
- **Heatmaps** (for √• vise korrelasjoner mellom variabler)
- **Box plots** (for √• visualisere fordeling og uteliggere)

### Installasjon
Hvis du ikke allerede har Seaborn installert, kan du gj√∏re det slik:

```python
    # Installerer seaborn ved hjelp av "!pip"-metoden
    !pip install seaborn
```

## **Eksempler med Seaborn**
Nedenfor vil vi se p√• noen grunnleggende eksempler p√• hvordan du kan bruke Seaborn for √• visualisere dataene dine.

### Eksempel 1
**Scatter plot**: Vi bruker Seaborn sin `scatterplot`-funksjon for √• vise forholdet mellom to numeriske variabler: `'BNP_per_capita'` og `'Utdanning'`.

```{python}
# Importer n√∏dvendige biblioteker
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Last inn datasett om skolegang og BNP - schooling-gdp.csv
# Her trenger dere deres path!
df = pd.read_csv('data/schooling-gdp.csv')

# Se p√• de f√∏rste radene i datasettet
print(df.head())

# Grunnleggende Seaborn-plots
# 1. Scatter plot (viser sammenhengen mellom 'GDP per capita' og 'Average years of schooling')

plt.figure(figsize=(10, 6))
sns.scatterplot(x='BNP_per_capita', y='Utdanning', data=df)
plt.title('Scatterplot av BNP per capita vs gj.snittlig skolegang')
plt.show()
```

## Eksempel 2: 
**Bar plot** (viser gjennomsnittlig GDP per capita gruppert etter land)

```{python}
plt.figure(figsize=(12, 8))
sns.barplot(x='Land', y='BNP_per_capita', data=df)
plt.xticks(rotation=90)
plt.title('Gjennomsnittling BNP per capita per land')
plt.show()
```

## Eksempel 3 - Heatmap (for √• vise korrelasjon mellom numeriske variabler)
Seaborn gj√∏r at vi kan bruke noe som heter 'heatmap' for √• se hvor *korrelert* numeriske variabler er.

```{python}
import numpy as np 

# Filtrere ut kun numeriske kolonner
df_numeric = df.select_dtypes(include=[np.number])

# Plotter correlation heatmap
plt.figure(figsize=(8, 6))
sns.heatmap(df_numeric.corr(), annot=True, cmap='coolwarm')
plt.title('Correlation Heatmap')
plt.show()
```

### Forklaring av Heatmap:

1. **Korrelasjon:**
   Et korrelasjonsheatmap viser sammenhengen mellom numeriske variabler i datasettet ditt. Korrelasjon m√•ler hvor sterkt to variabler henger sammen, og verdiene spenner fra -1 til 1:
   
   - **1:** Perfekt positiv korrelasjon (n√•r en variabel √∏ker, √∏ker ogs√• den andre).
   - **0:** Ingen korrelasjon (ingen line√¶r sammenheng mellom variablene).
   - **-1:** Perfekt negativ korrelasjon (n√•r en variabel √∏ker, synker den andre).

2. **Heatmap-fargene:**
   Fargene i heatmap'et representerer korrelasjonsverdiene:
   
   - **Bl√• omr√•der:** Indikerer en positiv korrelasjon (jo m√∏rkere bl√•, jo sterkere positiv korrelasjon).
   - **Hvite omr√•der:** Indikerer korrelasjoner n√¶r null, alts√• liten eller ingen line√¶r sammenheng mellom variablene.
   - **R√∏de omr√•der:** Indikerer en negativ korrelasjon (m√∏rkere r√∏dfarge betyr sterkere negativ korrelasjon).

3. **Diagonal:**
   P√• diagonalen i heatmap‚Äôet vil du se verdien 1 fordi hver variabel er *perfekt korrelert* med seg selv.

### Hvordan tolke heatmap‚Äôet:
- **Styrken p√• sammenhengen:** Du ser p√• hvor n√¶r korrelasjonen er 1 (positiv sammenheng) eller -1 (negativ sammenheng).
- **M√∏nster:** Du kan identifisere grupper av variabler som er sterkt korrelert med hverandre, noe som kan v√¶re nyttig i analysen. For eksempel, hvis flere variabler er sterkt korrelert, kan det indikere at de p√•virkes av lignende faktorer.

### Eksempel:
Hvis du har et datasett med variabler som `BNP_per_capita`, `Utdanning`, og `Befolkning`, kan heatmap‚Äôet over vise at h√∏yere utdanningsniv√• er knyttet til h√∏yere BNP per innbygger. Det ser vi fordi `BNP_per_capita` og `Utdanning` har en korrelasjon p√• **$0.72$**, noe som betyr det at disse to variablene har en sterk positiv line√¶r sammenheng. Sagt med andre ord, *utdanning er viktig for et land sin BNP*.

# **La oss se p√• et annet datasett**

## Eksempel 4 - Seaborn eksempeldatasett 
Her laster vi inn et eksempeldatasett, kalt **tips**, som ligger *inne i* biblioteket SeaBorn. 

```{python}
import seaborn as sns
import matplotlib.pyplot as plt

# Bruker Seaborn sitt innebygde 'tips'-datasett
df = sns.load_dataset('tips')
df.head()
```

```{python}
df.shape
```

```{python}
df.info()
```

```{python}
# Scatter plot med totalregning mot tips
plt.figure(figsize=(8, 6))
sns.scatterplot(x='total_bill', y='tip', data=df, hue='smoker', style='time', size='size')
plt.title('Scatterplot: Total Bill vs Tip')
plt.show()
```

**Forklaring**:

* ```hue='smoker'```: Farger punktene basert p√• om kunden r√∏yker eller ikke.
* ```style='time'```: Punktene er forskjellige avhengig av om det er lunsj eller middag.
* ```size='size'```: St√∏rrelsen p√• punktene varierer basert p√• hvor stor gruppen er.

## Eksempel 5 - Bar plot for sammenligning av kategoriske variabler

```{python}
# Bar plot som viser gjennomsnittlig tips per dag
plt.figure(figsize=(8, 6))
sns.barplot(x='day', y='tip', data=df, estimator=sum, ci=None)
plt.title('Total Tips per Day')
plt.show()
```

**Forklaring**:

* ```estimator=sum```: Summerer tips for hver dag.
* Bar plot viser hvordan total tips varierer avhengig av dagen i uken.

## Eksempel 6 - Boxplot 
Boxplots er nyttig for √• visualisere fordelingen av data og finne outliers.

```{python}
# Box plot som viser fordelingen av totalregning basert p√• kj√∏nn
plt.figure(figsize=(8, 6))
sns.boxplot(x='sex', y='total_bill', data=df)
plt.title('Boxplot of Total Bill by Gender')
plt.show()
```

#### **Forklaring av boxplot**:
* Her har vi et boxplot som viser median, kvartiler og potensieller outliers for hver gruppe (her 'male' og 'female').
* Det vi ser at median-tips'et er h√∏yere for menn enn damer.

##### **Detaljert forklaring**:
* Median (den horisontale streken inni boksen)
    - Viser midtpunktet i datasettet (den **50. percentilen**).

* Boksen (Q1 til Q3, interkvartilomr√•det - IQR)
    - Nedre del av boksen = **25. percentilen** (Q1)
    - √òvre del av boksen = **75. percentilen** (Q3)
    - Bredden p√• boksen (IQR) = Q3 - Q1 (viser variasjon i midtre 50 % av dataene).

* "Whiskers" (de vertikale linjene som strekker seg ut fra boksen)
    - Viser data innenfor **1.5 x IQR** fra Q1 og Q3.
    - Viser spennet til dataene, ekskludert ekstreme verdier.

* "*Outliers*" (prikker utenfor whiskers)
    - Verdier som er mer enn 1.5 * IQR unna fra boksen.
    - Vises ofte som sm√• sirkler eller prikker.

## Eksempel 7 - Pair plot
Pair plot er en flott m√•te √• f√• overblikk over hvordan variabler i et datasett henger sammen. 

Ligner p√• ggplot til R.

```{python}
# Pair plot for √• se sammenhengen mellom flere variabler
sns.pairplot(df, hue='sex')
plt.show()
```

**Forklaring**:
* ```hue = 'sex'```: Fargekoding basert p√• kj√∏nn.
* Plottet viser scatterplots mellom alle numeriske variabler samt fordelingen for hver variabel p√• diagonalen (```total_bill```, ```tip```, ```size```)

## Eksempel 8 - Histogram

```{python}
# Histogram som viser fordelingen av tips
plt.figure(figsize=(8, 6))
sns.histplot(df['tip'])
plt.title('Histogram of Tips')
plt.show()
```

Her lager vi et histogram ved hjelp av Seaborn.

### Hvorfor bruke Seaborn?

- **Forbedret estetikk**: Seaborn bygger p√• Matplotlib og gir estetisk tiltalende (standard) visualiseringer.
  
- **Enkel integrasjon med Pandas**: Seaborn fungerer s√∏ml√∏st med Pandas og DataFrames, noe som gj√∏r det enkelt √• visualisere store datasett.
  
- **H√•ndtering av statistiske aggregasjoner**: Mange av Seaborn's plott gj√∏r det enkelt √• vise statistiske aggregasjoner som middelverdier og konfidensintervaller.
  
- **Variabel visualisering**: Seaborn gir flere muligheter for visualisering av flere dimensjoner i data, f.eks. ved bruk av `hue`, `style`, `size` og `palette`.

Dette gir deg en rekke nyttige og fleksible verkt√∏y for √• utforske og visualisere data i Jupyter Notebook.

# Oppgaver
Her vil det komme en rekke oppgaver som krever Seaborn, og elementer fra tidligere i kurset.

## Oppgave 1 - Enkel visualisering med Seaborn

Lag en funksjon som tar inn en liste med tall og plotter et histogram ved hjelp av Seaborn. Sammenlign med Matplotlib.

Dere kan generere eksempeldata med f√∏lgende kode:
```python
    # Eksempeldata
    import numpy as np

    # Genererer 1000 tilfeldig normalfordelte tall
    data = np.random.normal(size=1000)
```

```{python}
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

```

## Oppgave 2 - Heatmap

Bruk datasettet `schooling-gdp.csv` til √• lage et heatmap med **kun** `BNP_per_capita` og `Utdanning` som variabler.

Hva ser vi her? Forklar med egne ord.

```{python}
# Her trenger dere deres path til datasettet!!!
df = pd.read_csv('/data/schooling-gdp.csv')
df.head()
```


## Oppgave 3 - `flights` datasett til SeaBorn
N√• skal dere bruke `flights` datasettet til SeaBorn. Det kan dere laste inn ved √• kj√∏re:

```python
import seaborn as sns
import matplotlib.pyplot as plt

# Last inn flights-datasettet
flights = sns.load_dataset("flights")
```

Datasettet viser antall flypassasjerer per m√•ned fra 1949 til 1960.

### Oppgave 3a ‚Äì Utvikling i passasjertall over tid üìà
Bruk SeaBorn og MatPlotLib til √• lage et lineplot, for √• se p√• utvikling av passasjertall over tid.

Plottet skal vise `year` p√• x-aksen, og `passengers` p√• y-aksen.

```{python}
flights = sns.load_dataset('flights')

flights.head()
```

```{python}
# Lineplot kode under her:
```

### Oppgave 3b ‚Äì Passasjertall per m√•ned og √•r
Lag en heatmap som viser passasjertall per m√•ned og √•r.

Tips, kj√∏r denne f√∏r du bruker `sns.heatmap()` funksjonen:

```python
# Pivot tabellen for heatmap
flights_pivot = flights.pivot(index="month", columns="year", values="passengers")
```

Hva kan vi f√• ut av dette plottet?

```{python}
# Pivot tabellen for heatmap
flights_pivot = flights.pivot(index="month", columns="year", values="passengers")

# Heatmap kode under her
```

### Oppgave 3c - Gjennomsnittlig antall passasjerer per m√•ned
Lag et barplot som viser gjennomsnittlig antall passasjerer per m√•ned.

Tips:

```python
sns.barplot(data=flights, x="month", y="passengers", estimator=sum, ci=None, order=[
    "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"])
```

```{python}
# Barplot kode under her
```

### Oppgave 3d - Line√¶r sammenheng mellom √•r og passasjertall
Lag en **regplot** for √• se om det er en line√¶r trend mellom √•r og passasjertall.

Denne oppgaven er litt utenfor pensum, men synliggj√∏r hvor mye man kan gj√∏re med SeaBorn. 

Pr√∏v √• kj√∏r koden under:
```python
    # Last inn flights-datasettet
    flights = sns.load_dataset("flights")

    # Aggregere data etter √•r, ekskluder ikke-numeriske kolonner
    flights_yearly = flights.groupby("year", as_index=False).sum(numeric_only=True)

    # Regresjonsplott
    plt.figure(figsize=(10,5))
    sns.regplot(x="year", y="passengers", data=flights_yearly)
    plt.title("Utvikling i antall passasjerer per √•r")
    plt.show()
```

### **Hva ser vi her? Hva er trenden?**


##### [< Forrige](7.1%20-%20matplotlib.ipynb)     |     [Neste >](8%20-%20sympy.ipynb)

